package swax.web.controller.user;
import java.util.ArrayList;import java.util.List;import org.apache.log4j.Logger;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.servlet.ModelAndView;import swax.web.component.sessionscope.SessionUser;import swax.webservice.entity.album.SwapAlbum;import swax.webservice.service.album.ISwapAlbumService;
@Controllerpublic class LatestAdditionsController {
	@Autowired	private ISwapAlbumService swapAlbumService;		@Autowired	private SessionUser sessionUser;		private Logger logger = Logger.getLogger(this.getClass());		@RequestMapping(value="/searchForSwaps", method = RequestMethod.GET)	public ModelAndView searchForSwaps(ModelAndView mav) {				logger.debug(this.getClass().getName()+this.getClass()+": searchForSwaps");				List<SwapAlbum> swapAlbums = (List<SwapAlbum>) swapAlbumService.findAllSortedByDateAdded();		List<SwapAlbum> swapAlbumsResult = new ArrayList<SwapAlbum>();		for (SwapAlbum swapAlbum: swapAlbums) {			if (swapAlbum.isAlbumToSwap()==true) {				swapAlbumsResult.add(swapAlbum);			}		}		mav.getModel().put("swapAlbums", swapAlbumsResult);			mav.getModel().put("user", sessionUser.getSessionUser());		mav.setViewName("swaps/searchForSwaps");		return mav;	}	
}